(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"./index.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/index.js"),a=n("./node_modules/react-dom/index.js"),i=n("./node_modules/react-redux/es/index.js"),o=n("./src/index.ts");n("./node_modules/bioblocks-viz/lib/assets/semantic.flat.min.css");var s=o.configureStore();a.render(r.createElement(i.Provider,{store:s},r.createElement(o.BioblocksPortalPage,null)),document.getElementById("app-root"))},"./src/container/SiteHeader.tsx":function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,a,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)o.push(r.value)}catch(e){a={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(a)throw a.error}}return o},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/react-router-dom/esm/react-router-dom.js"),u=n("./node_modules/semantic-ui-react/dist/es/index.js"),d=n("./src/selector/index.ts"),m=function(e){function t(t){var n=e.call(this,t)||this;return n.renderNavMenu=function(){return s.createElement(u.Menu,{defaultActiveIndex:-1,secondary:!0},s.createElement(u.Menu.Item,{key:"datasets"},s.createElement(l.Link,{to:"/datasets",style:{color:"black",fontSize:"18px"}},"datasets")),s.createElement(u.Menu.Item,{key:"visualizations"},s.createElement(l.Link,{to:"/visualizations",style:{color:"black",fontSize:"18px"}},"visualizations")),s.createElement(u.Menu.Item,{key:"vignettes"},s.createElement(l.Link,{to:"/vignettes",style:{color:"black",fontSize:"18px"}},"vignettes")))},n.onMouseClick=function(e){},n.state={currentPageName:null,isModalOpen:!1},n}return a(t,e),t.prototype.componentDidMount=function(){window.addEventListener("click",this.onMouseClick),this.props.search&&this.handleQueryParams(this.props.search)},t.prototype.componentDidUpdate=function(e){this.props.pathname&&this.props.pathname!==e.pathname&&this.handleQueryParams(this.props.search)},t.prototype.componentWillUnmount=function(){window.removeEventListener("click",this.onMouseClick)},t.prototype.render=function(){return s.createElement(u.Header,null,s.createElement(u.Menu,{secondary:!0,borderless:!0,fluid:!0,style:{maxHeight:"40px",padding:"20px 0 0 0"}},s.createElement(u.Menu.Item,{fitted:"vertically",position:"left"},s.createElement(l.Link,{to:"/"},s.createElement("img",{alt:"hca-dynamics-icon",src:"assets/icons/bio-blocks-icon-2x.png",style:{height:"32px",width:"32px"}}),s.createElement("span",{style:{color:"black",fontSize:"32px",fontWeight:"bold"}},"HCA Dynamics"))),this.renderNavMenu(),s.createElement(u.Menu.Item,{position:"right"},s.createElement(u.Input,{icon:"search",size:"massive",transparent:!0}))),this.renderNavBreadcrumb())},t.prototype.renderNavBreadcrumb=function(){var e=this.props.pathname;return s.createElement(u.Breadcrumb,{style:{padding:"0 0 0 40px"}},s.createElement(u.Breadcrumb.Section,null,s.createElement(l.Link,{to:"/"},"home")),e&&e.split("/").filter((function(e){return e.length>=1})).map((function(e,t){return s.createElement(s.Fragment,{key:"breadcrumb-"+t},s.createElement(u.Breadcrumb.Divider,{icon:"right angle"}),s.createElement(u.Breadcrumb.Section,null,s.createElement(l.Link,{to:"/"+e},e)))})),this.state.currentPageName&&s.createElement(s.Fragment,null,s.createElement(u.Breadcrumb.Divider,{icon:"right angle"}),s.createElement(u.Breadcrumb.Section,null,this.state.currentPageName)))},t.prototype.handleQueryParams=function(e){var t=this.props,n=t.dataset,r=t.visualizations,a=t.vignettes,i=new URLSearchParams(e),s=i.getAll("viz"),c=i.get("id");if(n&&c)c=n.name;else{var l=o(r,a).find((function(e){return e._id===c}));c=l?l.name:c}s.length>=1&&!name?this.setState({currentPageName:c,isModalOpen:!0}):this.setState({currentPageName:c,isModalOpen:!1})},t.defaultProps={dataset:null,vignettes:new Array,visualizations:new Array},t}(s.Component);t.UnconnectedSiteHeader=m;t.SiteHeader=c.connect((function(e){return{dataset:d.selectDataset(e),pathname:e.router.location.pathname,search:e.router.location.search,vignettes:d.selectVignettes(e),visualizations:d.selectVisualizations(e)}}))(m)},"./src/container/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/container/SiteHeader.tsx"))},"./src/data/BioblocksData.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedAuthors=function(e){return 2===e.authors.length?e.authors[0]+" and "+e.authors[1]:e.authors.join(", ")}},"./src/data/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/data/BioblocksData.ts"))},"./src/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/container/index.ts")),r(n("./src/page/index.ts")),r(n("./src/reducer/index.ts"))},"./src/page/BioblocksPortalPage.tsx":function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var c=n("./node_modules/bioblocks-viz/lib/index.js"),l=n("./node_modules/connected-react-router/esm/index.js"),u=n("./node_modules/react/index.js"),d=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/react-router-dom/esm/react-router-dom.js"),p=n("./node_modules/redux/es/redux.js"),h=n("./node_modules/semantic-ui-react/dist/es/index.js"),f=n("./src/container/index.ts"),g=n("./src/page/index.ts"),y=n("./src/reducer/index.ts"),v=n("./src/selector/index.ts"),E=function(e){function t(t){var n=e.call(this,t)||this;return n.onDatasetFetch=function(){return o(n,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,fetch('https://bioblocks.org/dataset?embedded={"analyses": 1}')];case 1:return(e=t.sent()).ok?[3,2]:[2,[]];case 2:return[4,e.json()];case 3:return[2,t.sent()._items.sort((function(e,t){return e.name.localeCompare(t.name)}))]}}))}))},n.onVignetteFetch=function(){return o(n,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,fetch("https://bioblocks.org/vignette")];case 1:return(e=t.sent()).ok?[3,2]:[2,[]];case 2:return[4,e.json()];case 3:return[2,t.sent()._items.sort((function(e,t){return e.name.localeCompare(t.name)}))]}}))}))},n.onVisualizationFetch=function(){return o(n,void 0,void 0,(function(){var e;return s(this,(function(t){switch(t.label){case 0:return[4,fetch("https://bioblocks.org/visualization")];case 1:return(e=t.sent()).ok?[3,2]:[2,[]];case 2:return[4,e.json()];case 3:return[2,t.sent()._items.sort((function(e,t){return e.name.localeCompare(t.name)}))]}}))}))},n.renderDynamicsPage=function(){return u.createElement(g.DynamicsPage,null)},n.renderLandingPage=function(e){var t=n.props,r=t.vignettes,a=t.visualizations,o=new Array;if(r){var s=r.find((function(e){return"bbdecade-0000-0000-0001-a1234567890b"===e._id})),c=r.find((function(e){return"bbdecade-0000-0000-0002-a1234567890b"===e._id}));c&&o.push(c),s&&o.push(s)}var l=new Array;if(a){var d=a.find((function(e){return"SPRING"===e.name})),m=a.find((function(e){return"UMAP"===e.name}));d&&l.push(d),m&&l.push(m)}return u.createElement(g.LandingPage,i({},e,{featuredVignettes:o,featuredVisualizations:l}))},n.renderDatasetsPage=function(e){var t=n.props,r=t.datasets,a=t.visualizations;return u.createElement(g.DatasetsPage,i({datasets:r,visualizations:a},e))},n.renderVignettesPage=function(e){var t=n.props.vignettes;return u.createElement(g.VignettesPage,i({},e,{vignettes:t}))},n.renderVisualizationsPage=function(e){var t=n.props.visualizations;return u.createElement(g.VisualizationsPage,i({},e,{visualizations:t}))},n.renderVizOverviewPage=function(e){var t=n.props,r=t.vignettes,a=t.visualizations;return u.createElement(g.VizOverviewPage,i({},e,{vignettes:r,visualizations:a}))},n}return a(t,e),t.prototype.componentDidMount=function(){return o(this,void 0,void 0,(function(){var e,t,n,r;return s(this,(function(a){return e=this.props,t=e.dispatchDatasetsFetch,n=e.dispatchVignettesFetch,r=e.dispatchVisualizationsFetch,t("datasets",this.onDatasetFetch),n("vignettes",this.onVignetteFetch),r("visualizations",this.onVisualizationFetch),[2]}))}))},t.prototype.render=function(){return u.createElement(l.ConnectedRouter,{history:y.history},u.createElement(h.Container,{id:"BioblocksPortalPage",fluid:!0},u.createElement(f.SiteHeader,i({},this.props)),u.createElement(m.Switch,null,u.createElement(m.Route,{exact:!0,strict:!0,path:"/datasets",render:this.renderDatasetsPage}),u.createElement(m.Route,{exact:!0,strict:!0,path:"/visualizations",render:this.renderVisualizationsPage}),u.createElement(m.Route,{exact:!0,strict:!0,path:"/visualizations/",render:this.renderVizOverviewPage}),u.createElement(m.Route,{path:"/dynamics",render:this.renderDynamicsPage}),u.createElement(m.Route,{path:"/vignettes",render:this.renderVignettesPage}),u.createElement(m.Route,{exact:!0,path:"/",render:this.renderLandingPage}))))},t.defaultProps={datasets:new Array,dispatchDatasetsFetch:c.EMPTY_FUNCTION,dispatchVignettesFetch:c.EMPTY_FUNCTION,dispatchVisualizationsFetch:c.EMPTY_FUNCTION,vignettes:new Array,visualizations:new Array},t}(u.Component);t.UnconnectedBioblocksPortalPage=E;t.BioblocksPortalPage=d.connect((function(e){return{datasets:v.selectDatasets(e),vignettes:v.selectVignettes(e),visualizations:v.selectVisualizations(e)}}),(function(e){return p.bindActionCreators({dispatchDatasetsFetch:c.fetchDataset,dispatchVignettesFetch:c.fetchDataset,dispatchVisualizationsFetch:c.fetchDataset},e)}))(E)},"./src/page/DatasetsPage.tsx":function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/index.js"),s=n("./node_modules/semantic-ui-react/dist/es/index.js"),c=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/react-router-dom/esm/react-router-dom.js"),u=function(e){function t(t){var n=e.call(this,t)||this;return n.getValidVizIds=function(e){var t,n,r="";try{for(var a=i(e),o=a.next();!o.done;o=a.next()){var s=o.value;"SPRING"===s.processType?(r+="&viz=bbfacade-0000-0000-0001-a1234567890b",r+="&viz=bbfacade-0000-0000-0004-a1234567890b"):"TSNE"===s.processType||("UMAP"===s.processType?r+="&viz=bbfacade-0000-0000-0004-a1234567890b":console.log("Process "+s._id+" has unhandled process of type '"+s.processType+"'."))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return r},n}return a(t,e),t.prototype.render=function(){var e=this,t=this.props.datasets;return o.createElement(s.Grid,{centered:!0,padded:!0,relaxed:!0},t.sort((function(e,t){return t.analyses.length-e.analyses.length})).map((function(t,n){return o.createElement(o.Fragment,{key:"vignette-"+n},e.renderSingleDatasetEntry(t))})))},t.prototype.renderSingleDatasetEntry=function(e){return o.createElement(o.Fragment,null,o.createElement(s.Grid.Row,{columns:3},this.renderSingleDatasetEntryHeader(e)),o.createElement(s.Divider,{section:!0}))},t.prototype.renderDatasetAnalysisLink=function(e,t){var n="/dynamics?id="+t+"&analysis="+e._id+this.getValidVizIds([e]);return o.createElement(s.Button,{basic:!0,key:"launch-button-for-"+e._id},o.createElement(l.Link,{to:n},"Launch '"+e.name+"'"))},t.prototype.renderSingleDatasetEntryHeader=function(e){var t=this;return o.createElement(s.Grid.Column,{textAlign:"left"},o.createElement(s.Header,null,e.name),o.createElement(s.Grid.Row,null,e.analyses.map((function(n){return t.renderDatasetAnalysisLink(n,e._id)}))))},t.defaultProps={datasets:[],visualizations:[]},t}(o.Component);t.UnconnectedDatasetsPage=u,t.DatasetsPage=c.connect(void 0)(u)},"./src/page/DynamicsPage.tsx":function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/redux/es/redux.js"),u=n("./node_modules/semantic-ui-react/dist/es/index.js"),d=n("./node_modules/bioblocks-viz/lib/index.js"),m=n("./src/selector/index.ts"),p=function(e){function t(t){var n=e.call(this,t)||this;return n.fetchUMapData=function(e){return i(n,void 0,void 0,(function(){var t,n,r,a,i,s,c,l;return o(this,(function(o){switch(o.label){case 0:return this.setState({isFetching:!0}),t=this.state,n=t.analysisId,r=t.datasetLocation,a=this.state,i=a.scRNAseqCategoricalData,s=a.scRNAseqMatrix,c=a.scRNAseqCategorySelected,e.analyses.find((function(e){return"SPRING"===e.processType}))?(l="https://bioblocks.org/datasets/"+r+"/analyses/"+n,[4,d.fetchJSONFile(l+"/"+e.name+"/categorical_coloring_data.json")]):[3,3];case 1:return i=o.sent(),[4,d.fetchMatrixData(l+"/"+e.name+"/pca.csv")];case 2:s=o.sent(),c=Object.keys(i).length>=1?Object.keys(i)[0]:c,o.label=3;case 3:return this.setState({isFetching:!1,scRNAseqCategoricalData:i,scRNAseqCategorySelected:c,scRNAseqMatrix:s}),[2]}}))}))},n.state={analysisId:"",datasetLocation:"hpc_sf2/full",datasetVisualizations:[],isFetching:!1,scRNAseqCategoricalData:{},scRNAseqCategorySelected:"Sample",scRNAseqMatrix:new Array(new Array)},n}return a(t,e),t.prototype.componentDidMount=function(){var e=this.props.search;0!==e.localeCompare("")&&this.setupSearchParameters(e)},t.prototype.componentDidUpdate=function(e,t){return i(this,void 0,void 0,(function(){var n,r,a,i,s,c,l,u,d;return o(this,(function(o){switch(o.label){case 0:return n=this.props,r=n.dataset,a=n.search,i=n.vignettes,s=n.visualizations,c=this.state,l=c.datasetLocation,u=c.isFetching,d=null!==r&&0!==JSON.stringify(r).localeCompare(JSON.stringify(e.dataset)),u||!(a&&0!==a.localeCompare(e.search)||!0===t.isFetching||d||i!==e.vignettes||s!==e.visualizations)?[3,2]:(this.setupSearchParameters(a),r&&l!==t.datasetLocation?[4,this.fetchUMapData(r)]:[3,2]);case 1:o.sent(),o.label=2;case 2:return!u&&r&&d?[4,this.fetchUMapData(r)]:[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},t.prototype.render=function(){var e=this,t=this.state,n=t.datasetVisualizations,r=t.datasetLocation,a=t.isFetching;return s.createElement("div",{style:{padding:"20px"}},s.createElement(u.Grid,{centered:!0,stackable:!0,stretched:!1,padded:!0,columns:2},a?s.createElement(u.Grid.Column,null,"Loading..."):n.length>=1?r.length>=1&&n.map((function(t,n){return s.createElement(u.Grid.Column,{key:"dataset-visualization-"+n,style:{width:"auto"}},e.renderVisualization(t,r))})):s.createElement(u.Grid.Column,null,"No visualizations!")))},t.prototype.setupSearchParameters=function(e){var t=this,n=this.props,r=n.dispatchDatasetFetch,a=n.vignettes,s=n.visualizations,c=this.state.datasetLocation,l=new Array;if(a){var u=new URLSearchParams(e),d=u.get("id");c=d||c,u.getAll("viz").forEach((function(e){var t=s.find((function(t){return e===t._id}));t&&l.push(t)}));var m=u.get("analysis");this.setState({analysisId:m||"",datasetLocation:c,datasetVisualizations:l}),r("dataset",(function(){return i(t,void 0,void 0,(function(){var e;return o(this,(function(t){switch(t.label){case 0:return[4,fetch("https://bioblocks.org/dataset/"+d+'?embedded={"analyses":1}')];case 1:return(e=t.sent()).ok?[4,e.json()]:[3,3];case 2:return[2,t.sent()];case 3:return[2,null]}}))}))}))}},t.prototype.renderSpringVisualization=function(e,t,n,r){var a=this.state.analysisId,i=this.props.dataset?this.props.dataset.name:"";return s.createElement(d.SpringContainer,{datasetLocation:"datasets/"+n+"/analyses/"+a+"/"+i,datasetsURI:"https://bioblocks.org/datasets",isFullPage:t,springSrc:"https://bioblocks.org/"+e.location,iconSrc:r})},t.prototype.renderUMAPVisualization=function(){var e=this.state,t=e.scRNAseqCategoricalData,n=e.scRNAseqMatrix,r=e.scRNAseqCategorySelected;return this.props.dataset&&n.length>=1&&n[0].length>=1?s.createElement(d.UMAPTranscriptionalContainer,{categoricalAnnotations:t,dataMatrix:n,labelCategory:r,numIterationsBeforeReRender:1,numSamplesToShow:5e3,sampleNames:void 0}):s.createElement(u.Grid.Column,null,"Loading...")},t.prototype.renderVisualization=function(e,t){var n=1===this.state.datasetVisualizations.length,r="https://bioblocks.org"+e.icon,a=this.state.analysisId;switch(e.name.toLocaleLowerCase()){case"spring":return this.renderSpringVisualization(e,n,t,r);case"tfjs-tsne":return s.createElement(d.TensorTContainer,{datasetLocation:"https://bioblocks.org/datasets/"+t+"/analyses/"+a,iconSrc:r});case"anatomogram":var i=this.props.dataset&&"mus_musculus"===this.props.dataset.species?"mus_musculus":"homo_sapiens";return s.createElement(d.AnatomogramContainer,{species:i,iconSrc:r});case"umap":return this.renderUMAPVisualization();default:return s.createElement(u.Message,{error:!0},"Currently unsupported visualization '"+e+"'")}},t.defaultProps={dataset:null,dispatchDatasetFetch:d.EMPTY_FUNCTION,pathname:"",search:"",vignettes:new Array,visualizations:new Array},t}(s.Component);t.UnconnectedDynamicsPage=p;t.DynamicsPage=c.connect((function(e){return{dataset:e.dataset,pathname:e.router.location.pathname,search:e.router.location.search,vignettes:m.selectVignettes(e),visualizations:m.selectVisualizations(e)}}),(function(e){return l.bindActionCreators({dispatchDatasetFetch:d.fetchDataset},e)}))(p)},"./src/page/LandingPage.tsx":function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),o=n("./node_modules/react-router-dom/esm/react-router-dom.js"),s=n("./node_modules/semantic-ui-react/dist/es/index.js"),c=n("./src/data/index.ts"),l=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.render=function(){return i.createElement(s.Container,{fluid:!1},i.createElement(s.Segment,{basic:!0,padded:"very"},i.createElement(s.Grid,{centered:!0,padded:!0,relaxed:!0},this.renderFeaturedVignettes(),this.renderFeaturedVisualizations(),this.renderFeaturedDatasets())))},t.prototype.renderSingleVisualization=function(e){return i.createElement(s.Grid.Row,{columns:3},i.createElement(s.Grid.Column,{width:2},i.createElement("img",{src:"https://bioblocks.org"+e.icon,style:{height:"90px",width:"90px"},alt:"viz "+e.name+" icon"})),i.createElement(s.Grid.Column,{textAlign:"left",width:8},i.createElement(s.Header,null,e.name),e.summary,i.createElement("p",null,i.createElement("span",{style:{fontWeight:"bold"}},e.isOriginal?"Original authors":"Authors",": "),c.getFormattedAuthors(e)),i.createElement("br",null)),this.renderSingleVizLinks(e))},t.prototype.renderFeaturedDatasets=function(){return i.createElement(i.Fragment,null,i.createElement(s.Grid.Row,{centered:!0},i.createElement(s.Grid.Column,{width:12},i.createElement(s.Header,{floated:"left"},"Featured Datasets"),i.createElement(s.Divider,{section:!0}))),i.createElement(s.Grid.Row,{columns:2,divided:!0},this.renderHCADatasets(),this.renderUserSharedDatasets()))},t.prototype.renderFeaturedVignettes=function(){var e=this.props.featuredVignettes;return i.createElement(i.Fragment,null,i.createElement(s.Grid.Row,{centered:!1},i.createElement(s.Grid.Column,{width:12},i.createElement(s.Header,{floated:"left"},"Featured Vignettes"),i.createElement(s.Divider,{section:!0}))),e[0]&&this.renderSingleFeaturedVignette(e[0]),e[1]&&this.renderSingleFeaturedVignette(e[1]),i.createElement(s.Grid.Row,{centered:!1},i.createElement(s.Grid.Column,{width:12},i.createElement(o.Link,{style:{color:"blue",float:"right"},to:"vignettes"},"more vignettes..."))))},t.prototype.renderFeaturedVisualizations=function(){var e=this.props.featuredVisualizations;return i.createElement(i.Fragment,null,i.createElement(s.Grid.Row,{centered:!1},i.createElement(s.Grid.Column,{width:12},i.createElement(s.Header,{floated:"left"},"Featured Visualizations"),i.createElement(s.Divider,{section:!0}))),e[0]&&this.renderSingleVisualization(e[0]),e[1]&&this.renderSingleVisualization(e[1]),i.createElement(s.Grid.Row,{centered:!1},i.createElement(s.Grid.Column,{width:12},i.createElement(o.Link,{style:{color:"blue",float:"right"},to:"visualizations"},"more visualizations..."))))},t.prototype.renderSingleFeaturedVignette=function(e){return i.createElement(s.Grid.Row,{columns:3},i.createElement(s.Grid.Column,{width:2},i.createElement("img",{src:"https://bioblocks.org"+e.icon,style:{height:"90px",width:"90px"},alt:"vignettes "+e.name+" icon"})),this.renderVignetteHeader(e),i.createElement(s.Grid.Column,{width:2},i.createElement(s.Button,{basic:!0},i.createElement(o.Link,{to:"/dynamics?id="+e.dataset+e.visualizations.map((function(e){return"&viz="+e})).join("")},"launch"))))},t.prototype.renderVignetteHeader=function(e){return i.createElement(s.Grid.Column,{textAlign:"left",width:8},i.createElement(s.Header,null,e.name),i.createElement("p",null,i.createElement("span",{style:{fontWeight:"bold"}},"Description: "),e.summary),i.createElement("p",null,i.createElement("span",{style:{fontWeight:"bold"}},"Analysis authors: "),c.getFormattedAuthors(e)),i.createElement("br",null))},t.prototype.renderHCADatasets=function(){return i.createElement(s.Grid.Column,{width:3},i.createElement(s.Grid.Row,null,i.createElement("img",{src:"assets/icons/hca-logo.png",style:{width:"150px",height:"250px"},alt:"human cell atlas logo"}),i.createElement(s.Grid.Row,null,i.createElement("a",{href:"https://preview.data.humancellatlas.org/"},"Search HCA datasets ..."))))},t.prototype.renderUserSharedDatasets=function(){return i.createElement(s.Grid.Column,{stretched:!0,textAlign:"left",width:8},i.createElement(s.Grid.Row,{textAlign:"center"},i.createElement(s.Header,{as:"h2",textAlign:"center"},"User shared")),i.createElement("br",null),i.createElement(s.Grid.Row,{textAlign:"center"},i.createElement(s.Header,{as:"h3",textAlign:"center"},"Coming soon!")))},t.prototype.renderSingleVizLinks=function(e){return i.createElement(s.Grid.Column,{width:2},i.createElement(s.Grid.Row,null,i.createElement(s.Button,{basic:!0},i.createElement(o.Link,{to:{pathname:"/visualizations/",search:"?id="+e._id}},"details"))),i.createElement(s.Grid.Row,null,i.createElement(s.Button,{basic:!0},i.createElement(o.Link,{to:{pathname:"/dynamics",search:"?id="+e.exampleDataset+"&viz="+e._id}},"launch"))))},t.defaultProps={featuredVignettes:[],featuredVisualizations:[]},t}(i.Component);t.LandingPage=l},"./src/page/VignettesPage.tsx":function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),o=n("./node_modules/react-router-dom/esm/react-router-dom.js"),s=n("./node_modules/semantic-ui-react/dist/es/index.js"),c=n("./node_modules/react-redux/es/index.js"),l=n("./src/data/index.ts"),u=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.render=function(){var e=this,t=this.props.vignettes;return i.createElement(s.Grid,{centered:!0,padded:!0,relaxed:!0},t.map((function(t,n){return i.createElement(i.Fragment,{key:"vignette-"+n},e.renderSingleVignette(t))})))},t.prototype.renderSingleVignette=function(e){return i.createElement(s.Grid.Row,{columns:3},i.createElement(s.Grid.Column,null,i.createElement("img",{src:"https://bioblocks.org"+e.icon,style:{height:"90px",width:"90px"},alt:"vignette "+e.name+" icon"})),this.renderVignetteSummary(e),this.renderVignetteLink(e))},t.prototype.renderVignetteLink=function(e){return i.createElement(s.Grid.Column,null,i.createElement(s.Button,{basic:!0},i.createElement(o.Link,{to:"/dynamics?id="+e.dataset+e.visualizations.map((function(e){return"&viz="+e})).join("")},"launch")))},t.prototype.renderVignetteSummary=function(e){return i.createElement(s.Grid.Column,{textAlign:"left"},i.createElement(s.Header,null,e.name),i.createElement("p",null,i.createElement("span",{style:{fontWeight:"bold"}},"Description: "),e.summary),i.createElement("p",null,i.createElement("span",{style:{fontWeight:"bold"}},"Analysis authors: "),l.getFormattedAuthors(e)),i.createElement("br",null))},t.defaultProps={vignettes:[]},t}(i.Component);t.UnconnectedVignettesPage=u,t.VignettesPage=c.connect(void 0)(u)},"./src/page/VisualizationsPage.tsx":function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),o=n("./node_modules/react-router-dom/esm/react-router-dom.js"),s=n("./node_modules/semantic-ui-react/dist/es/index.js"),c=n("./src/data/index.ts"),l=function(e){function t(t){return e.call(this,t)||this}return a(t,e),t.prototype.render=function(){var e=this,t=this.props.visualizations;return i.createElement(s.List,{divided:!0},t.map((function(t,n){return i.createElement(s.List.Item,{key:"viz-page-li-"+n},e.renderVisualizationItem(t))})))},t.prototype.renderVisualizationItem=function(e){return i.createElement(s.Grid,{centered:!0,columns:3,padded:!0,relaxed:!0},i.createElement(s.Grid.Column,null,i.createElement("img",{src:"https://bioblocks.org"+e.icon,alt:"icon for "+e.name,style:{height:"100px"}})),this.renderVisualizationHeader(e),this.renderVisualizationLinks(e))},t.prototype.renderVisualizationHeader=function(e){return i.createElement(s.Grid.Column,{textAlign:"left"},i.createElement(s.Header,{as:"h2"},e.name),i.createElement(s.List,null,i.createElement(s.List.Item,null,(e.isOriginal?"original: ":"")+c.getFormattedAuthors(e)),i.createElement(s.List.Item,null,e.summary),i.createElement(s.List.Item,null,"relevant data: "+e.compatibleData.join(", "))))},t.prototype.renderVisualizationLinks=function(e){return i.createElement(s.Grid.Column,{stretched:!0},i.createElement(s.Grid.Row,null,i.createElement(s.Button,{basic:!0},i.createElement(o.Link,{to:{pathname:"/visualizations/",search:"?id="+e._id}},"details"))),i.createElement(s.Grid.Row,null,i.createElement(s.Button,{basic:!0},i.createElement(o.Link,{to:{pathname:"/dynamics",search:"?id="+e.exampleDataset+"&viz="+e._id}},"launch"))))},t.defaultProps={visualizations:[]},t}(i.Component);t.VisualizationsPage=l},"./src/page/VizOverviewPage.tsx":function(e,t,n){"use strict";var r,a=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var o=n("./node_modules/react/index.js"),s=n("./node_modules/react-redux/es/index.js"),c=n("./node_modules/react-router-dom/esm/react-router-dom.js"),l=n("./node_modules/semantic-ui-react/dist/es/index.js"),u=n("./src/data/index.ts"),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentViz:null},n}return a(t,e),t.prototype.componentWillMount=function(){var e=this.props,t=e.location,n=e.visualizations;if(t){var r=new URLSearchParams(t.search).get("id"),a=n.find((function(e){return e._id===r}));this.setState({currentViz:a||null})}},t.prototype.componentDidUpdate=function(e,t){var n=this.props,r=n.location,a=n.visualizations;if(r&&r!==e.location){var i=new URLSearchParams(r.search).get("id");if(null===t.currentViz||t.currentViz._id!==i){var o=a.find((function(e){return e._id===i}));this.setState({currentViz:o||null})}}},t.prototype.render=function(){var e,t,n,r,a=this.props,s=a.vignettes,c=a.visualizations,u=this.state.currentViz,d=new Array;try{for(var m=i(s),p=m.next();!p.done;p=m.next()){var h=p.value,f=function(e){c.find((function(t){return t._id===e}))&&!d.includes(h)&&d.push(h)};try{for(var g=(n=void 0,i(h.visualizations)),y=g.next();!y.done;y=g.next()){f(y.value)}}catch(e){n={error:e}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{p&&!p.done&&(t=m.return)&&t.call(m)}finally{if(e)throw e.error}}return u&&o.createElement(l.Container,null,this.renderOverview(u),this.renderExamples(d))},t.prototype.renderCitations=function(e){return o.createElement(o.Fragment,null,"citation(s):"," ",e.citations.map((function(t,n){return o.createElement(o.Fragment,{key:e.name.toLocaleLowerCase()+"-citation-"+n},t.fullCitation," (",o.createElement("a",{href:t.link},"link"),")")})))},t.prototype.renderExamples=function(e){var t=this,n=[{content:{content:o.createElement(o.Fragment,null,o.createElement(l.Divider,null),o.createElement(l.Grid,{centered:!0,columns:1,container:!0,divided:"vertically",style:{padding:"10px 0"}},e.map((function(e,n){return o.createElement(l.Grid.Row,{columns:2,key:"viz-example-"+n},t.renderExampleEntry(e))}))))},key:"examples",title:"example vignettes"},{content:"Coming soon!",key:"learn",title:"learn"}];return o.createElement(l.Accordion,{panels:n,defaultActiveIndex:0})},t.prototype.renderExampleEntry=function(e){return o.createElement(o.Fragment,null,o.createElement(l.Grid.Column,{width:2},o.createElement("img",{src:"https://bioblocks.org"+e.icon,alt:e.name+" icon",style:{height:"75px",width:"75px"}})),o.createElement(l.Grid.Column,{textAlign:"left",width:8},o.createElement(l.Header,null,e.name),o.createElement("p",null,e.summary)),o.createElement(l.Grid.Column,{floated:"right"},o.createElement(l.Button,{basic:!0,icon:!0,labelPosition:"right"},o.createElement(c.Link,{to:"/dynamics?id="+e.dataset+e.visualizations.map((function(e){return"&viz="+e})).join("")},"launch example"),o.createElement(l.Icon,{name:"external alternate"}))))},t.prototype.renderLink=function(e){return o.createElement(l.Grid.Column,{floated:"right"},o.createElement(l.Button,{basic:!0,icon:!0,labelPosition:"right"},o.createElement(c.Link,{to:{pathname:"/dynamics",search:"?id="+e.exampleDataset+"&viz="+e._id}},"launch "+e.name),o.createElement(l.Icon,{name:"external alternate"})))},t.prototype.renderOverview=function(e){return o.createElement(l.Grid,{centered:!0,columns:2},o.createElement(l.Grid.Column,{width:2},o.createElement("img",{alt:"icon for "+e.name,src:"https://bioblocks.org"+e.icon,style:{height:"150px",padding:"20px"}})),o.createElement(l.Grid.Column,{textAlign:"left"},o.createElement(l.Header,{as:"h1"},e.name,o.createElement(l.Header.Subheader,null,u.getFormattedAuthors(e))),this.renderSummary(e)))},t.prototype.renderSummary=function(e){return o.createElement(o.Fragment,null,o.createElement("p",null,e.summary),o.createElement(l.List,null,o.createElement(l.List.Item,null,"compatible with: ",e.compatibleData.join(", ")),o.createElement(l.List.Item,null,this.renderCitations(e)),o.createElement(l.List.Item,null,"version: ",e.repo.version," (last updated ",e.repo.lastUpdate,"),",o.createElement("a",{href:e.repo.link}," github link")),o.createElement(l.List.Item,null,this.renderLink(e))))},t.defaultProps={vignettes:[],visualizations:[]},t}(o.Component);t.UnconnectedVizOverviewPage=d;t.VizOverviewPage=s.connect((function(e){return{hash:e.router.location.hash,pathname:e.router.location.pathname,search:e.router.location.search}}))(d)},"./src/page/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/page/BioblocksPortalPage.tsx")),r(n("./src/page/DatasetsPage.tsx")),r(n("./src/page/DynamicsPage.tsx")),r(n("./src/page/LandingPage.tsx")),r(n("./src/page/VignettesPage.tsx")),r(n("./src/page/VisualizationsPage.tsx")),r(n("./src/page/VizOverviewPage.tsx"))},"./src/reducer/PortalReducer.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/bioblocks-viz/lib/index.js"),a=n("./node_modules/connected-react-router/esm/index.js"),i=n("./node_modules/redux/es/redux.js");t.PortalReducer=function(e){return i.combineReducers({dataset:r.DataReducer("dataset",null),datasets:r.DataReducer("datasets",[]),router:a.connectRouter(e),vignettes:r.DataReducer("vignettes",[]),visualizations:r.DataReducer("visualizations",[])})}},"./src/reducer/Store.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/bioblocks-viz/lib/index.js"),a=n("./node_modules/connected-react-router/esm/index.js"),i=n("./node_modules/history/esm/history.js"),o=(n("./node_modules/redux-logger/dist/redux-logger.js"),n("./node_modules/redux-thunk/es/index.js"));t.history=i.createHashHistory(),[o.default,a.routerMiddleware(t.history)].push(r.BioblocksMiddleware),r.ReducerRegistry.register("dataset",r.DataReducer("dataset",null)),r.ReducerRegistry.register("datasets",r.DataReducer("datasets",[])),r.ReducerRegistry.register("router",a.connectRouter(t.history)),r.ReducerRegistry.register("vignettes",r.DataReducer("vignettes",[])),r.ReducerRegistry.register("visualizations",r.DataReducer("visualizations",[])),t.configureStore=function(){return r.BBStore}},"./src/reducer/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/reducer/PortalReducer.ts")),r(n("./src/reducer/Store.ts"))},"./src/selector/PortalSelector.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectDataset=function(e){return e.dataset},t.selectDatasets=function(e){return e.datasets?e.datasets:[]},t.selectVignettes=function(e){return e.vignettes?e.vignettes:[]},t.selectVisualizations=function(e){return e.visualizations?e.visualizations:[]}},"./src/selector/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/selector/PortalSelector.ts"))}},[["./index.tsx",1,2]]]);